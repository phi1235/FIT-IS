<div class="admin-container">
  <!-- Main Content -->
  <main class="admin-main">
    <!-- Stats Grid -->
    <div class="dashboard-header">
      <h2> Dashboard Overview</h2>
      <div class="header-actions">
        <button class="btn-refresh" (click)="loadData()" [disabled]="loading">
          Làm mới dữ liệu
        </button>
      </div>
    </div>

    <!-- Error Message -->
    <div *ngIf="error" class="error-message">
      {{ error }}
    </div>

    <!-- Loading -->
    <div *ngIf="loading" class="loading">
      <div class="spinner"></div>
      <span>Đang tải...</span>
    </div>

    <!-- User Stats -->
    <div *ngIf="isAdmin && !loading">
      <h3 class="stats-title">Thống kê Người dùng</h3>
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon u-icon"></div>
          <div class="stat-info">
            <div class="stat-value">{{ totalUsers }}</div>
            <div class="stat-label">Tổng số Users</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon u-icon"></div>
          <div class="stat-info">
            <div class="stat-value">{{ adminCount }}</div>
            <div class="stat-label">Admin</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon u-icon"></div>
          <div class="stat-info">
            <div class="stat-value">{{ activeCount }}</div>
            <div class="stat-label">Đang hoạt động</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Ticket Stats -->
    <div *ngIf="!loading">
      <h3 class="stats-title">Thống kê Tickets</h3>
      <div class="stats-grid">
        <div class="stat-card t-total">
          <div class="stat-icon t-icon"></div>
          <div class="stat-info">
            <div class="stat-value">{{ totalTickets }}</div>
            <div class="stat-label">Tổng số Tickets</div>
          </div>
        </div>
        <div class="stat-card t-pending">
          <div class="stat-icon t-icon"></div>
          <div class="stat-info">
            <div class="stat-value">{{ pendingTickets }}</div>
            <div class="stat-label">Chờ phê duyệt</div>
          </div>
        </div>
        <div class="stat-card t-approved">
          <div class="stat-icon t-icon"></div>
          <div class="stat-info">
            <div class="stat-value">{{ approvedTickets }}</div>
            <div class="stat-label">Đã phê duyệt</div>
          </div>
        </div>
        <div class="stat-card t-rejected">
          <div class="stat-icon t-icon"></div>
          <div class="stat-info">
            <div class="stat-value">{{ rejectedTickets }}</div>
            <div class="stat-label">Đã từ chối</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Reports Section -->
    <div class="reports-section mb-4" *ngIf="!loading">
      <h3 class="stats-title"> Báo cáo Nhanh</h3>
      <div class="reports-grid">
        <div class="report-card" *ngIf="isAdmin">
          <h4>Báo cáo Users</h4>
          <div class="report-actions">
            <button class="btn-report pdf" (click)="downloadReport('users', 'pdf')">PDF</button>
            <button class="btn-report excel" (click)="downloadReport('users', 'xlsx')">Excel</button>
          </div>
        </div>
        <div class="report-card">
          <h4>Báo cáo Tickets</h4>
          <div class="report-actions">
            <button class="btn-report pdf" (click)="downloadReport('tickets', 'pdf')">PDF</button>
            <button class="btn-report excel" (click)="downloadReport('tickets', 'xlsx')">Excel</button>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>